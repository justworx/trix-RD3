{
	
	"module" : "sqlite3",
	"args" : [],
	"path" : "~/.cache/trix/irc/%s.sqlite3",
	"auto" : true,
	
	"sql"  : {
		
		"create" : [
			"create table network (netid, network)",
			"create index ix_network (network)",
			
			"create table channel (netid, chanid, channel)",
			"create index ix_channel (network, channel)",
			
			"create table nickname (netid, nickid, nickname)",
			"create index ix_nickname (netid, nickname)",
			
			"create table username (netid, userid, username)",
			"create index ix_username (netid, username)",
			
			"create table hostmask (netid, maskid, hostmask)",
			"create index ix_hostmask (netid, hostmask)",
			
			"create table realname (netid, nameid, realname)",
			"create index ix_realname (netid, realname)",
			
			"create table identity (id, netid, nickid, userid, maskid, nameid)",
			
			"create table chatlog (netid, chanid, id, text, time)"
		],
		
		
		"op" : {
			
			"addnet" : "insert into network values (?,?)",
			"addchan" : "insert into channel values (?,?,?)",
			"addnick" : "insert into nickname values (?,?,?)",
			"adduser" : "insert into username values (?,?,?)",
			"addmask" : "insert into hostmask values (?,?,?)",
			"addname" : "insert into realname values (?,?,?)",
			"addid"   : "insert into identity values (?,?,?,?,?,?)",
			"addchat" : "insert into chatlog values (?,?,?,?,?)",
			
			
			"netid" : "select netid from network where network = ?",
			"chanid" : "select chanid from channel where channel = ?",
			"nickid" : "select nickid from nickname where nickname = ?",
			"userid" : "select userid from username where username = ?",
			"maskid" : "select maskid from hostmask where hostmask = ?"
			
		}
	}
}
